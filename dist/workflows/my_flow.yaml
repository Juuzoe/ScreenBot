# Global defaults for all steps (can be overridden per-step)
defaults:
  monitor_index: 1
  region: null                    # [left, top, width, height] or null
  poll_interval_ms: 250
  max_wait_seconds: 45
  backoff_after_action_ms: 600
  dry_run: false
  diagnostics:
    save_on: ["timeout"]          # options: hit, miss, timeout
    out_dir: "debug_dumps"

steps:
  - name: "Open settings"
    condition:
      type: "template"
      template_path: "assets/btn_settings.png"
      confidence: 0.88
      multiscale:
        enabled: true
        scales: [0.9, 1.0, 1.1]
        pick: "best"
    action:
      type: "click"
      click_where: "match-center"
    post_action_delay_ms: 800

  - name: "Click Advanced tab"
    condition:
      type: "template"
      template_path: "assets/tab_advanced.png"
      confidence: 0.9
      multiscale:
        enabled: true
        scales: [0.95, 1.0, 1.05]
        pick: "best"
    action:
      type: "click"
      click_where: "match-center"
    post_action_delay_ms: 600

  - name: "Press Save"
    condition:
      type: "text"
      text_query: "Save"
      ocr_psm: 6
      case_sensitive: false
    action:
      type: "sequence"
      steps:
        - type: "click"           # click near where the text was found (center of region)
          click_where: "match-center"
        - type: "hotkey"          # confirm with Enter as a second step
          keys: ["enter"]
          delay_ms: 100
    post_action_delay_ms: 800
